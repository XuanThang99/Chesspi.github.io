<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>ChessPi</title>
<link rel="stylesheet" href="style.css">
<script src="https://cdn.jsdelivr.net/npm/pi-sdk/pi-sdk.min.js"></script>
<script src="pi-login.js"></script>
</head>
<body>
<div id="login-container">
    <h1>ChessPi</h1>
    <button onclick="signInWithPi()">Đăng nhập với Pi</button>
</div>

<div id="main-menu" style="display:none">
    <h2>Chào <span id="username"></span></h2>
    <button onclick="startOnline()">Chơi Online (Multiplayer)</button>
    <button onclick="startOffline()">Chơi với Máy (AI)</button>
    <button onclick="viewHistory()">Xem Lịch sử</button>
</div>

<script>
async function signInWithPi(){
    try {
        const user = await PiSDK.signIn();
        document.getElementById("username").textContent = user.username;
        document.getElementById("login-container").style.display = "none";
        document.getElementById("main-menu").style.display = "block";
        localStorage.setItem('piUser', JSON.stringify(user));
    } catch(e){
        alert("Đăng nhập thất bại: " + e.message);
    }
}

function startOnline(){ window.location.href = "game.html?mode=online"; }
function startOffline(){ window.location.href = "game.html?mode=offline"; }
function viewHistory(){ window.location.href = "history.html"; }
</script>
</body>
</html>
